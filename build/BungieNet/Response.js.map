{"version":3,"sources":["../../src/BungieNet/Response.js"],"names":["Response","o","errorCode","ErrorCode","errorStatus","ErrorStatus","message","Message","messageData","MessageData","response","throttleSeconds","ThrottleSeconds","enums","platformErrorCodes","success","throttle_limit_exceeded","throttle_limit_exceeded_minutes","throttle_limit_exceeded_seconds","throttle_limit_exceeded_momentarily","per_endpoint_request_throttle_exceeded","text","obj","undefined","JSON","parse","err","Promise","reject","resolve"],"mappings":";;;;;;;;AAAA;;;;;;;;AAEA;;;;;;;;IAQqBA,Q;;AAEnB;;;AAGA,oBAAYC,CAAZ,EAAe;AAAA;;AACb,SAAKC,SAAL,GAAiBD,EAAEE,SAAnB;AACA,SAAKC,WAAL,GAAmBH,EAAEI,WAArB;AACA,SAAKC,OAAL,GAAeL,EAAEM,OAAjB;AACA,SAAKC,WAAL,GAAmBP,EAAEQ,WAArB;AACA,SAAKC,QAAL,GAAgBT,EAAED,QAAlB;AACA,SAAKW,eAAL,GAAuBV,EAAEW,eAAzB;AACD;;AAED;;;;;;;;wBAIc;AACZ,aAAO,KAAKV,SAAL,KAAmB,oBAAUW,KAAV,CAAgBC,kBAAhB,CAAmCC,OAA7D;AACD;;AAED;;;;;;;wBAIkB;;AAEhB,cAAO,KAAKb,SAAZ;AACE,aAAK,oBAAUW,KAAV,CAAgBC,kBAAhB,CAAmCE,uBAAxC;AACA,aAAK,oBAAUH,KAAV,CAAgBC,kBAAhB,CAAmCG,+BAAxC;AACA,aAAK,oBAAUJ,KAAV,CAAgBC,kBAAhB,CAAmCI,+BAAxC;AACA,aAAK,oBAAUL,KAAV,CAAgBC,kBAAhB,CAAmCK,mCAAxC;AACA,aAAK,oBAAUN,KAAV,CAAgBC,kBAAhB,CAAmCM,sCAAxC;AACE,iBAAO,IAAP;AACF;AACE,iBAAO,KAAP;AARJ;AAWD;;AAED;;;;;;;;0BAKaC,I,EAAM;;AAEjB,UAAIC,MAAMC,SAAV;;AAEA,UAAI;AACFD,cAAME,KAAKC,KAAL,CAAWJ,IAAX,CAAN;AACD,OAFD,CAGA,OAAMK,GAAN,EAAW;AACT,eAAOC,QAAQC,MAAR,CAAeL,SAAf,CAAP;AACD;;AAED,aAAOI,QAAQE,OAAR,CAAgB,IAAI7B,QAAJ,CAAasB,GAAb,CAAhB,CAAP;AAED;;;;;;kBA3DkBtB,Q","file":"Response.js","sourcesContent":["import BungieNet from \"./BungieNet.js\";\r\n\r\n/**\r\n * BungieNet.Platform.Response\r\n *\r\n * Represents an application response from the bungie.net platform. This type\r\n * should be constructed using an object from bungie.net (ie. JSON).\r\n *\r\n * This type complements BungieNet.Platform.Request.\r\n */\r\nexport default class Response {\r\n\r\n  /**\r\n   * @param {Object} o -\r\n   */\r\n  constructor(o) {\r\n    this.errorCode = o.ErrorCode;\r\n    this.errorStatus = o.ErrorStatus;\r\n    this.message = o.Message;\r\n    this.messageData = o.MessageData;\r\n    this.response = o.Response;\r\n    this.throttleSeconds = o.ThrottleSeconds;\r\n  }\r\n\r\n  /**\r\n   * Whether this response represents a platform application error\r\n   * @type {Boolean}\r\n   */\r\n  get isError() {\r\n    return this.errorCode !== BungieNet.enums.platformErrorCodes.success;\r\n  }\r\n\r\n  /**\r\n   * Whether this response was throttled\r\n   * @return {Boolean} -\r\n   */\r\n  get isThrottled() {\r\n\r\n    switch(this.errorCode) {\r\n      case BungieNet.enums.platformErrorCodes.throttle_limit_exceeded:\r\n      case BungieNet.enums.platformErrorCodes.throttle_limit_exceeded_minutes:\r\n      case BungieNet.enums.platformErrorCodes.throttle_limit_exceeded_seconds:\r\n      case BungieNet.enums.platformErrorCodes.throttle_limit_exceeded_momentarily:\r\n      case BungieNet.enums.platformErrorCodes.per_endpoint_request_throttle_exceeded:\r\n        return true;\r\n      default:\r\n        return false;\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Parses a response from the bungie.net platform\r\n   * @param {String} text -\r\n   * @return {Promise.<BungieNet.Platform.Response>} -\r\n   */\r\n  static parse(text) {\r\n\r\n    let obj = undefined;\r\n\r\n    try {\r\n      obj = JSON.parse(text);\r\n    }\r\n    catch(err) {\r\n      return Promise.reject(undefined);\r\n    }\r\n\r\n    return Promise.resolve(new Response(obj));\r\n\r\n  }\r\n\r\n}\r\n"]}